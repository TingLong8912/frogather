{"ast":null,"code":"import React from 'react';\nimport { useContext, useEffect } from \"react\";\nimport { message } from 'antd';\nimport MapContext from \"./../../hook/MapContext\";\nimport { Vector as VectorLayer } from 'ol/layer.js';\nimport Draw from 'ol/interaction/Draw.js';\nconst DrawVectorLayer = ({\n  name,\n  source,\n  style,\n  zIndex\n}) => {\n  const {\n    map,\n    isDraw,\n    setIsDraw,\n    userCoord,\n    setUserCoord\n  } = useContext(MapContext);\n  useEffect(() => {\n    if (!map) return;\n    let vectorLayer = new VectorLayer({\n      name,\n      source,\n      style\n    });\n    map.addLayer(vectorLayer);\n    vectorLayer.setZIndex(zIndex);\n    addInteraction();\n    return () => {\n      if (map) {\n        map.removeLayer(vectorLayer);\n      }\n    };\n  }, [map]);\n  useEffect(() => {\n    if (!map) return;\n    clearLayer();\n    let vectorLayer = new VectorLayer({\n      name,\n      source,\n      style\n    });\n    map.addLayer(vectorLayer);\n  }, [userCoord]);\n  useEffect(() => {\n    if (isDraw) {\n      clearLayer();\n      addInteraction();\n      setIsDraw(false);\n    }\n  }, [isDraw]);\n  return null;\n};\nexport default DrawVectorLayer;","map":{"version":3,"names":["React","useContext","useEffect","message","MapContext","Vector","VectorLayer","Draw","DrawVectorLayer","name","source","style","zIndex","map","isDraw","setIsDraw","userCoord","setUserCoord","vectorLayer","addLayer","setZIndex","addInteraction","removeLayer","clearLayer"],"sources":["/Users/yantinglong/Documents/project/frogather/src/components/Layers/DrawVectorLayer.js"],"sourcesContent":["import React from 'react';\nimport { useContext, useEffect } from \"react\";\nimport { message } from 'antd';\nimport MapContext from \"./../../hook/MapContext\";\nimport { Vector as VectorLayer } from 'ol/layer.js';\nimport Draw from 'ol/interaction/Draw.js';\n\nconst DrawVectorLayer = ({ name, source, style, zIndex }) => {\n\tconst { map, isDraw, setIsDraw, userCoord, setUserCoord } = useContext(MapContext);\n\n\tuseEffect(()=>{\n\t\tif (!map) return;\n\t\tlet vectorLayer = new VectorLayer({\n\t\t\tname,\n\t\t\tsource,\n\t\t\tstyle\n\t\t});\n\t\tmap.addLayer(vectorLayer);\n\t\tvectorLayer.setZIndex(zIndex);\n\t\taddInteraction();\n\n\t\treturn () => {\n\t\t\tif (map) {\n\t\t\t\tmap.removeLayer(vectorLayer);\n\t\t\t}\n\t\t};\n\t}, [map]);\n\n\tuseEffect(()=>{\n\t\tif (!map) return;\n\t\tclearLayer();\n\t\tlet vectorLayer = new VectorLayer({\n\t\t\tname,\n\t\t\tsource,\n\t\t\tstyle\n\t\t});\n\t\tmap.addLayer(vectorLayer);\n\t}, [userCoord]);\n\n\n  useEffect(()=>{\n\t\tif (isDraw) {\n\t\t\tclearLayer();\n\t\t\taddInteraction();\n\t\t\tsetIsDraw(false);\n\t\t}\n  }, [isDraw]);\n\n\treturn null;\n};\n\nexport default DrawVectorLayer;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC7C,SAASC,OAAO,QAAQ,MAAM;AAC9B,OAAOC,UAAU,MAAM,yBAAyB;AAChD,SAASC,MAAM,IAAIC,WAAW,QAAQ,aAAa;AACnD,OAAOC,IAAI,MAAM,wBAAwB;AAEzC,MAAMC,eAAe,GAAGA,CAAC;EAAEC,IAAI;EAAEC,MAAM;EAAEC,KAAK;EAAEC;AAAO,CAAC,KAAK;EAC5D,MAAM;IAAEC,GAAG;IAAEC,MAAM;IAAEC,SAAS;IAAEC,SAAS;IAAEC;EAAa,CAAC,GAAGhB,UAAU,CAACG,UAAU,CAAC;EAElFF,SAAS,CAAC,MAAI;IACb,IAAI,CAACW,GAAG,EAAE;IACV,IAAIK,WAAW,GAAG,IAAIZ,WAAW,CAAC;MACjCG,IAAI;MACJC,MAAM;MACNC;IACD,CAAC,CAAC;IACFE,GAAG,CAACM,QAAQ,CAACD,WAAW,CAAC;IACzBA,WAAW,CAACE,SAAS,CAACR,MAAM,CAAC;IAC7BS,cAAc,CAAC,CAAC;IAEhB,OAAO,MAAM;MACZ,IAAIR,GAAG,EAAE;QACRA,GAAG,CAACS,WAAW,CAACJ,WAAW,CAAC;MAC7B;IACD,CAAC;EACF,CAAC,EAAE,CAACL,GAAG,CAAC,CAAC;EAETX,SAAS,CAAC,MAAI;IACb,IAAI,CAACW,GAAG,EAAE;IACVU,UAAU,CAAC,CAAC;IACZ,IAAIL,WAAW,GAAG,IAAIZ,WAAW,CAAC;MACjCG,IAAI;MACJC,MAAM;MACNC;IACD,CAAC,CAAC;IACFE,GAAG,CAACM,QAAQ,CAACD,WAAW,CAAC;EAC1B,CAAC,EAAE,CAACF,SAAS,CAAC,CAAC;EAGdd,SAAS,CAAC,MAAI;IACd,IAAIY,MAAM,EAAE;MACXS,UAAU,CAAC,CAAC;MACZF,cAAc,CAAC,CAAC;MAChBN,SAAS,CAAC,KAAK,CAAC;IACjB;EACA,CAAC,EAAE,CAACD,MAAM,CAAC,CAAC;EAEb,OAAO,IAAI;AACZ,CAAC;AAED,eAAeN,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module"}