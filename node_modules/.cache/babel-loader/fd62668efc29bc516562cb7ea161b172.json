{"ast":null,"code":"var _Spot$XML_Head$Infos$,\n  _jsxFileName = \"/Users/yantinglong/Documents/project/frogather/src/containers/Sences/Record/Modal/UpdateRecordModal.jsx\";\nimport { Modal, Button, Form, Input, message, AutoComplete, Pagination } from 'antd';\nimport { EnvironmentFilled, PushpinFilled, GlobalOutlined, ExceptionOutlined } from '@ant-design/icons';\nimport { FiMap, FiMinusCircle, FiAlertTriangle, FiCrosshair, FiHash } from \"react-icons/fi\";\nimport { useState, useContext, useEffect } from 'react';\nimport MapContext from 'hook/MapContext';\nimport Frog from \"assets/frog.json\";\nimport Spot from \"assets/scenic_spot_C_f.json\";\nimport { getReverseGeocoding, createRecord } from '../../../../axios';\nimport { toLonLat } from 'ol/proj';\nimport styled from 'styled-components';\nimport { ImageUpload } from 'components/ImageUpload';\nimport { OptionCard } from 'components/OptionCard';\nimport { useAuth0 } from '@auth0/auth0-react';\nconst coordTextStyle = {\n  fontWeight: \"400\",\n  fontSize: \"xx-small\",\n  margin: \"0 3px\",\n  color: \"rgb(150, 150, 150)\"\n};\nconst speciesDataSource = Frog[\"species\"].map((item, index) => {\n  return {\n    \"key\": index,\n    \"value\": item.name,\n    \"label\": item.name\n  };\n});\nconst spotDataSource = (_Spot$XML_Head$Infos$ = Spot[\"XML_Head\"][\"Infos\"][\"Info\"]) === null || _Spot$XML_Head$Infos$ === void 0 ? void 0 : _Spot$XML_Head$Infos$.map((item, index) => {\n  var lat_and_lon = Math.round(item.Py * 100) / 100 + \", \" + Math.round(item.Px * 100) / 100;\n  return {\n    \"key\": index,\n    \"value\": item.Name,\n    \"label\": /*#__PURE__*/React.createElement(React.Fragment, null, item.Name, /*#__PURE__*/React.createElement(\"span\", {\n      style: coordTextStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 29\n      }\n    }, lat_and_lon))\n  };\n});\nconst ModalFooter = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  padding-top: 25px;\n`;\nconst SubText = styled.div`\n  font-weight: 400;\n  font-size: xx-small; \n  margin: 10px 0;\n  color: rgb(102, 102, 102);\n`;\nconst OptionCardRow = styled.div`\n  display: flex;\n  margin: 1rem 0;\n  justifyContent: space-between;\n  gap: 0.5rem;\n`;\nconst UpdateRecordModal = ({\n  isUpdateRecordModalOpen,\n  setIsUpdateRecordModalOpen,\n  setRecords\n}) => {\n  const {\n    map,\n    setCenter,\n    setZoom,\n    setIsDraw,\n    userCoord,\n    setUserCoord\n  } = useContext(MapContext);\n  const [userPlaceName, setUserPlaceName] = useState([]);\n  const [modalPage, setModelPage] = useState(1);\n  const [hashtagTypes, setHashtagTypes] = useState([]);\n  const [locationType, setLocationType] = useState(\"\");\n  const [recordType, setRecordType] = useState(\"public\");\n  const [speciesOptions, setSpeciesOptions] = useState(speciesDataSource);\n  const [locationOptions, setLocationOptions] = useState([]);\n  const [form] = Form.useForm();\n  const {\n    user\n  } = useAuth0();\n  useEffect(() => {\n    if (userCoord) {\n      var lat_and_lon = toLonLat(userCoord);\n      const fetchData = async () => {\n        const result = await getReverseGeocoding(lat_and_lon[1], lat_and_lon[0]);\n        setUserPlaceName(result);\n      };\n      fetchData();\n      form.setFieldValue(\"placeCoord\", lat_and_lon);\n    }\n  }, [userCoord]);\n  useEffect(() => {\n    if (userPlaceName) {\n      var lat_and_lon = toLonLat(userCoord);\n      lat_and_lon = Math.round(lat_and_lon[0] * 100) / 100 + \", \" + Math.round(lat_and_lon[1] * 100) / 100;\n      const options = userPlaceName.map((place, index) => {\n        return {\n          \"key\": index,\n          \"value\": place,\n          \"label\": /*#__PURE__*/React.createElement(React.Fragment, null, place, /*#__PURE__*/React.createElement(\"span\", {\n            style: coordTextStyle,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 29\n            }\n          }, lat_and_lon))\n        };\n      });\n      if (options.length > 0) {\n        setLocationOptions([options[0], options[1], options[2]]);\n      }\n    }\n  }, [userPlaceName]);\n  useEffect(() => {\n    if (recordType === \"public\") {\n      form.setFieldValue(\"isAuthPulic\", true);\n    } else {\n      form.setFieldValue(\"isAuthPulic\", false);\n    }\n  }, [recordType]);\n\n  /* HANDLE MODAL */\n  const handleCancel = () => {\n    setIsUpdateRecordModalOpen(false);\n  };\n\n  /* SPECIES DROPDOWN */\n  const onSpeciesSearch = val => {\n    let filtered = [];\n    if (val) {\n      filtered = speciesDataSource.filter(({\n        value\n      }) => value.includes(val));\n    }\n    setSpeciesOptions(filtered);\n  };\n  const onSpeciesSelect = val => {\n    form.setFieldValue(\"speciesName\", val);\n  };\n\n  /* LOCATION DROPDOWN */\n  const onLocationSearch = val => {\n    let filtered = [];\n    if (val) {\n      filtered = spotDataSource.filter(({\n        value\n      }) => value.includes(val));\n    }\n    ;\n    setLocationOptions(filtered);\n  };\n  const handleLocation = () => {\n    setLocationType(\"user\");\n    map.getLayers().forEach(layer => {\n      if (layer.get('name') === 'userlocation') {\n        try {\n          var _layer$getSource$getF;\n          let coord = (_layer$getSource$getF = layer.getSource().getFeatures()[0].getGeometry()) === null || _layer$getSource$getF === void 0 ? void 0 : _layer$getSource$getF.getCoordinates();\n          setCenter(coord);\n          setUserCoord(coord);\n          setZoom(14);\n          message.success(\"地圖已縮放到您所在位置\");\n        } catch (e) {}\n      }\n    });\n  };\n  const handleDraw = () => {\n    setLocationType(\"draw\");\n    handleCancel();\n    setIsDraw(true);\n  };\n  const handleHashtage = index => {\n    if (hashtagTypes.includes(index)) {\n      var temp = [...hashtagTypes];\n      var array_index = temp.indexOf(index);\n      if (array_index > -1) temp.splice(array_index, 1);\n      setHashtagTypes(temp);\n    } else {\n      setHashtagTypes([...hashtagTypes, index]);\n    }\n  };\n  useEffect(() => {\n    form.setFieldValue(\"hashtag\", hashtagTypes);\n  }, [hashtagTypes]);\n\n  /* HANDLE FORM SUMBIT */\n  const onFinish = async values => {\n    message.success(\"💪🐸：感謝您的貢獻\");\n    const data = await createRecord(values);\n    setRecords(data);\n    setIsUpdateRecordModalOpen(false);\n  };\n  const onFinishFailed = errorInfo => {\n    message.error(\"🐸💧：請再次確認您填寫的內容\");\n  };\n  return /*#__PURE__*/React.createElement(Modal, {\n    title: \"\\u56DE\\u5831\\u7D00\\u9304\",\n    open: isUpdateRecordModalOpen,\n    onCancel: handleCancel,\n    footer: null,\n    bodyStyle: {\n      minHeight: 150\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    form: form,\n    name: \"basic\",\n    labelCol: {\n      span: 24\n    },\n    wrapperCol: {\n      span: 24\n    },\n    initialValues: {\n      userName: user === null || user === void 0 ? void 0 : user.name,\n      isAuthPulic: true,\n      placeCoord: userCoord\n    },\n    onFinish: onFinish,\n    onFinishFailed: onFinishFailed,\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: modalPage === 1 ? \"block\" : \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"\\u5206\\u985E\",\n    name: \"hashtag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(OptionCardRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(OptionCard, {\n    className: hashtagTypes.includes(1) ? \"active\" : \"\",\n    onClick: () => handleHashtage(1),\n    icon: /*#__PURE__*/React.createElement(FiMap, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 23\n      }\n    }),\n    text: \"蛙調\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(OptionCard, {\n    className: hashtagTypes.includes(2) ? \"active\" : \"\",\n    onClick: () => handleHashtage(2),\n    icon: /*#__PURE__*/React.createElement(FiAlertTriangle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 23\n      }\n    }),\n    text: \"待移除\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(OptionCard, {\n    className: hashtagTypes.includes(3) ? \"active\" : \"\",\n    onClick: () => handleHashtage(3),\n    icon: /*#__PURE__*/React.createElement(FiMinusCircle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 23\n      }\n    }),\n    text: \"移除\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(OptionCardRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(OptionCard, {\n    className: hashtagTypes.includes(4) ? \"active\" : \"\",\n    onClick: () => handleHashtage(4),\n    icon: /*#__PURE__*/React.createElement(FiCrosshair, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 23\n      }\n    }),\n    text: \"詢問\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(OptionCard, {\n    className: hashtagTypes.includes(0) ? \"active\" : \"\",\n    onClick: () => handleHashtage(0),\n    icon: /*#__PURE__*/React.createElement(FiHash, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 23\n      }\n    }),\n    text: \"其他\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: modalPage === 2 ? \"block\" : \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"\\u7269\\u7A2E\",\n    name: \"speciesName\",\n    rules: [{\n      required: true,\n      message: '請輸入您所發現的物種!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(AutoComplete, {\n    options: speciesOptions,\n    onSearch: onSpeciesSearch,\n    onSelect: onSpeciesSelect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(SubText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }\n  }, \"\\uD83D\\uDC38\\uFF1A\\u4E0D\\u77E5\\u9053\\u6211\\u662F\\u8AB0\\uFF1F\"))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: modalPage === 3 ? \"block\" : \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"發現地點\",\n    name: \"placeCoord\",\n    rules: [{\n      required: true,\n      message: '請開啟定位取得您所在坐標位置或由地圖上繪製地點!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SubText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  }, \"\\u60A8\\u767C\\u73FE\\u7269\\u7A2E\\u4E4B\\u5730\\u9EDE\\u5750\\u6A19\"), /*#__PURE__*/React.createElement(OptionCardRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(OptionCard, {\n    className: locationType === \"user\" ? \"active\" : \"\",\n    onClick: handleLocation,\n    icon: /*#__PURE__*/React.createElement(EnvironmentFilled, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 23\n      }\n    }),\n    text: \"參考您目前所在位置\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(OptionCard, {\n    className: locationType === \"draw\" ? \"active\" : \"\",\n    onClick: handleDraw,\n    icon: /*#__PURE__*/React.createElement(PushpinFilled, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 23\n      }\n    }),\n    text: \"在地圖上繪製您所在地\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(SubText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 11\n    }\n  }, \"\\u60A8\\u767C\\u73FE\\u7269\\u7A2E\\u4E4B\\u5730\\u9EDE\\u540D\\u7A31\"), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"placeName\",\n    rules: [{\n      required: true,\n      message: '請輸入您發現物種之地點名稱!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(AutoComplete, {\n    options: locationOptions,\n    onSearch: onLocationSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"\\u60A8\\u7684\\u540D\\u5B57\",\n    name: \"userName\",\n    style: {\n      display: modalPage === 4 ? \"block\" : \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"\\u6709\\u4EC0\\u9EBC\\u60F3\\u8AAA\\u7684...\",\n    name: \"context\",\n    style: {\n      display: modalPage === 4 ? \"block\" : \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input.TextArea, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"\\u5206\\u4EAB\\u5C0D\\u8C61\",\n    name: \"isAuthPulic\",\n    style: {\n      display: modalPage === 5 ? \"block\" : \"none\"\n    },\n    rules: [{\n      required: true,\n      message: '請選擇分享對象!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(OptionCardRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(OptionCard, {\n    className: recordType === \"public\" ? \"active\" : \"\",\n    onClick: () => setRecordType(\"public\"),\n    icon: /*#__PURE__*/React.createElement(GlobalOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 21\n      }\n    }),\n    text: \"公開顯示發現紀錄、地點與貼文給所有人\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(OptionCard, {\n    className: recordType === \"private\" ? \"active\" : \"\",\n    onClick: () => setRecordType(\"private\"),\n    icon: /*#__PURE__*/React.createElement(ExceptionOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 21\n      }\n    }),\n    text: \"僅顯示發現紀錄、地點與貼文給志工團隊\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Pagination, {\n    simple: true,\n    defaultCurrent: modalPage,\n    total: 50,\n    onChange: page => {\n      setModelPage(page);\n    },\n    style: {\n      width: \"100%\",\n      position: \"relative\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Form.Item, {\n    style: {\n      display: modalPage === 5 ? \"block\" : \"none\",\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    style: {\n      height: \"40px\",\n      marginInlineStart: \"8px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 13\n    }\n  }, \"\\u9001\\u51FA\")))));\n};\nexport { UpdateRecordModal };","map":{"version":3,"names":["Modal","Button","Form","Input","message","AutoComplete","Pagination","EnvironmentFilled","PushpinFilled","GlobalOutlined","ExceptionOutlined","FiMap","FiMinusCircle","FiAlertTriangle","FiCrosshair","FiHash","useState","useContext","useEffect","MapContext","Frog","Spot","getReverseGeocoding","createRecord","toLonLat","styled","ImageUpload","OptionCard","useAuth0","coordTextStyle","fontWeight","fontSize","margin","color","speciesDataSource","map","item","index","name","spotDataSource","_Spot$XML_Head$Infos$","lat_and_lon","Math","round","Py","Px","Name","React","createElement","Fragment","style","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ModalFooter","div","SubText","OptionCardRow","UpdateRecordModal","isUpdateRecordModalOpen","setIsUpdateRecordModalOpen","setRecords","setCenter","setZoom","setIsDraw","userCoord","setUserCoord","userPlaceName","setUserPlaceName","modalPage","setModelPage","hashtagTypes","setHashtagTypes","locationType","setLocationType","recordType","setRecordType","speciesOptions","setSpeciesOptions","locationOptions","setLocationOptions","form","useForm","user","fetchData","result","setFieldValue","options","place","length","handleCancel","onSpeciesSearch","val","filtered","filter","value","includes","onSpeciesSelect","onLocationSearch","handleLocation","getLayers","forEach","layer","get","_layer$getSource$getF","coord","getSource","getFeatures","getGeometry","getCoordinates","success","e","handleDraw","handleHashtage","temp","array_index","indexOf","splice","onFinish","values","data","onFinishFailed","errorInfo","error","title","open","onCancel","footer","bodyStyle","minHeight","labelCol","span","wrapperCol","initialValues","userName","isAuthPulic","placeCoord","autoComplete","display","Item","label","className","onClick","icon","text","rules","required","onSearch","onSelect","TextArea","simple","defaultCurrent","total","onChange","page","width","position","type","htmlType","height","marginInlineStart"],"sources":["/Users/yantinglong/Documents/project/frogather/src/containers/Sences/Record/Modal/UpdateRecordModal.jsx"],"sourcesContent":["import { Modal, Button, Form, Input, message, AutoComplete, Pagination } from 'antd';\nimport { EnvironmentFilled, PushpinFilled, GlobalOutlined, ExceptionOutlined } from '@ant-design/icons';\nimport { FiMap, FiMinusCircle, FiAlertTriangle, FiCrosshair, FiHash } from \"react-icons/fi\";\nimport { useState, useContext, useEffect } from 'react';\nimport MapContext from 'hook/MapContext';\nimport Frog from \"assets/frog.json\";\nimport Spot from \"assets/scenic_spot_C_f.json\";\nimport { getReverseGeocoding, createRecord } from '../../../../axios';\nimport { toLonLat } from 'ol/proj';\nimport styled from 'styled-components';\nimport { ImageUpload } from 'components/ImageUpload';\nimport { OptionCard } from 'components/OptionCard';\nimport { useAuth0 } from '@auth0/auth0-react';\n\nconst coordTextStyle = {\n  fontWeight: \"400\", \n  fontSize: \"xx-small\", \n  margin: \"0 3px\",\n  color: \"rgb(150, 150, 150)\"\n}\nconst speciesDataSource = \n  Frog[\"species\"].map((item, index)=>{\n    return {\n      \"key\": index,\n      \"value\": item.name,\n      \"label\": item.name\n    }\n  });\nconst spotDataSource =\n  Spot[\"XML_Head\"][\"Infos\"][\"Info\"]?.map((item, index)=>{\n    var lat_and_lon = Math.round(item.Py*100)/100 + \", \" + Math.round(item.Px*100)/100;\n    return {\n      \"key\": index,\n      \"value\": item.Name,\n      \"label\": <>{item.Name}<span style={coordTextStyle}>{lat_and_lon}</span></>\n    }\n  });\nconst ModalFooter = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  padding-top: 25px;\n`;\n\nconst SubText = styled.div`\n  font-weight: 400;\n  font-size: xx-small; \n  margin: 10px 0;\n  color: rgb(102, 102, 102);\n`;\n\nconst OptionCardRow = styled.div`\n  display: flex;\n  margin: 1rem 0;\n  justifyContent: space-between;\n  gap: 0.5rem;\n`;\n\nconst UpdateRecordModal = ({ isUpdateRecordModalOpen, setIsUpdateRecordModalOpen, setRecords }) => {\n  const { map, setCenter, setZoom, setIsDraw, userCoord, setUserCoord } = useContext(MapContext);\n  const [ userPlaceName, setUserPlaceName ] = useState([]);\n  const [ modalPage, setModelPage ] = useState(1);\n  const [ hashtagTypes, setHashtagTypes ] = useState([]);\n  const [ locationType, setLocationType ] = useState(\"\");\n  const [ recordType, setRecordType ] = useState(\"public\");\n  const [ speciesOptions, setSpeciesOptions ] = useState(speciesDataSource);\n  const [ locationOptions, setLocationOptions ] = useState([]);\n  const [ form ] = Form.useForm();\n  const { user } = useAuth0();\n\n  useEffect(() => {\n    if (userCoord) {\n      var lat_and_lon = toLonLat(userCoord);\n      const fetchData = async () => {\n        const result = await getReverseGeocoding(lat_and_lon[1], lat_and_lon[0]);\n        setUserPlaceName(result)\n      }\n      fetchData();\n      form.setFieldValue(\"placeCoord\", lat_and_lon);\n    }\n\t}, [userCoord]);\n\n\n  useEffect(() => {\n    if (userPlaceName) {\n      var lat_and_lon = toLonLat(userCoord);\n      lat_and_lon = Math.round(lat_and_lon[0]*100)/100 + \", \" + Math.round(lat_and_lon[1]*100)/100;\n      const options = userPlaceName.map((place, index)=>{\n        return {\n          \"key\": index,\n          \"value\": place,\n          \"label\": <>{place}<span style={coordTextStyle}>{lat_and_lon}</span></>\n        }\n      });\n      if (options.length > 0) {\n        setLocationOptions([options[0], options[1], options[2]]); \n      }\n    }\n  }, [userPlaceName]);\n\n  useEffect(() => {\n    if (recordType === \"public\") {\n      form.setFieldValue(\"isAuthPulic\", true);\n    } else {\n      form.setFieldValue(\"isAuthPulic\", false);\n    }\n  }, [recordType]);\n  \n  /* HANDLE MODAL */\n  const handleCancel = () => {\n    setIsUpdateRecordModalOpen(false);\n  };\n\n  /* SPECIES DROPDOWN */\n  const onSpeciesSearch = (val) => {\n    let filtered = [];\n    if (val) {\n      filtered = speciesDataSource.filter(\n        ({value}) => value.includes(val)\n      );\n    }\n    setSpeciesOptions(filtered);\n  };\n\n  const onSpeciesSelect = (val) => {\n    form.setFieldValue(\"speciesName\", val);\n  };\n\n  /* LOCATION DROPDOWN */\n  const onLocationSearch = (val) => {\n    let filtered = [];\n    if (val) {\n      filtered = spotDataSource.filter(\n        ({value}) => value.includes(val)\n      );\n    };\n    setLocationOptions(filtered);\n  };\n\n  const handleLocation = () => {\n    setLocationType(\"user\");\n    map.getLayers().forEach((layer) => {\n      if (layer.get('name') === 'userlocation') {\n        try {\n          let coord = layer.getSource().getFeatures()[0].getGeometry()?.getCoordinates();\n          setCenter(coord);\n          setUserCoord(coord);\n          setZoom(14);\n          message.success(\"地圖已縮放到您所在位置\");\n        } catch(e) {\n\n        }\n      }\n    })\n  };\n\n  const handleDraw = () => {\n    setLocationType(\"draw\");\n    handleCancel();\n    setIsDraw(true);\n  };\n\n  const handleHashtage = (index) => {\n    if (hashtagTypes.includes(index)){\n      var temp = [...hashtagTypes];\n      var array_index = temp.indexOf(index);\n      if (array_index > -1) temp.splice(array_index, 1); \n      setHashtagTypes(temp);\n    } else {\n      setHashtagTypes([...hashtagTypes, index]);\n    }\n  };\n\n  useEffect(() => {\n    form.setFieldValue(\"hashtag\", hashtagTypes);\n  }, [hashtagTypes]);\n\n  /* HANDLE FORM SUMBIT */\n  const onFinish = async (values) => {\n    message.success(\"💪🐸：感謝您的貢獻\");\n    const data = await createRecord(values);\n    setRecords(data);\n    setIsUpdateRecordModalOpen(false);\n  };\n\n  const onFinishFailed = (errorInfo) => {\n    message.error(\"🐸💧：請再次確認您填寫的內容\");\n  };\n\n  return (\n    <Modal \n      title=\"回報紀錄\" \n      open={isUpdateRecordModalOpen} \n      onCancel={handleCancel}\n      footer={null}\n      bodyStyle={{minHeight: 150}}\n    >\n      <Form\n        form={form}\n        name=\"basic\"\n        labelCol={{span: 24,}}\n        wrapperCol={{span: 24,}}\n        initialValues={{\n          userName: user?.name,\n          isAuthPulic: true,\n          placeCoord: userCoord,\n        }}\n        onFinish={onFinish}\n        onFinishFailed={onFinishFailed}\n        autoComplete=\"off\"\n      >\n         <div style={{display: (modalPage === 1)? \"block\": \"none\"}}>\n          <Form.Item\n            label=\"分類\"\n            name=\"hashtag\"\n          >\n            <OptionCardRow>\n              <OptionCard \n                className={(hashtagTypes.includes(1))? \"active\": \"\"}\n                onClick={() => handleHashtage(1)}\n                icon={<FiMap />}\n                text={\"蛙調\"}\n              />\n              <OptionCard \n                className={(hashtagTypes.includes(2))? \"active\": \"\"}\n                onClick={() => handleHashtage(2)}\n                icon={<FiAlertTriangle />}\n                text={\"待移除\"}\n              />\n              <OptionCard \n                className={(hashtagTypes.includes(3))? \"active\": \"\"}\n                onClick={() => handleHashtage(3)}\n                icon={<FiMinusCircle />}\n                text={\"移除\"}\n              />\n            </OptionCardRow>\n            <OptionCardRow>\n              <OptionCard\n                className={(hashtagTypes.includes(4))? \"active\": \"\"}\n                onClick={() => handleHashtage(4)}\n                icon={<FiCrosshair />}\n                text={\"詢問\"}\n              />\n              <OptionCard\n                className={(hashtagTypes.includes(0))? \"active\": \"\"}\n                onClick={() => handleHashtage(0)}\n                icon={<FiHash />}\n                text={\"其他\"}\n              />\n            </OptionCardRow>\n          </Form.Item>\n        </div>\n\n        <div style={{display: (modalPage === 2)? \"block\": \"none\"}}>\n          <Form.Item\n            label=\"物種\"\n            name=\"speciesName\"\n            rules={[\n              {\n                required: true,\n                message: '請輸入您所發現的物種!',\n              },\n            ]}\n          >\n            <AutoComplete\n              options={speciesOptions}\n              onSearch={onSpeciesSearch}\n              onSelect={onSpeciesSelect}\n            >\n              <Input />\n            </AutoComplete>\n            <SubText>🐸：不知道我是誰？</SubText>\n          </Form.Item>\n          {/* <Form.Item\n            name=\"animalPhoto\"   \n          >\n            <SubText>您可以上傳拍攝到的動物圖片</SubText>\n            <ImageUpload />\n          </Form.Item> */}\n        </div>\n\n        <div style={{display: (modalPage === 3)? \"block\": \"none\"}}>\n          <Form.Item\n            label={\"發現地點\"}\n            name=\"placeCoord\"\n            rules={[\n              {\n                required: true,\n                message: '請開啟定位取得您所在坐標位置或由地圖上繪製地點!',\n              },\n            ]}\n          >\n            <SubText>您發現物種之地點坐標</SubText>\n            <OptionCardRow>\n              <OptionCard \n                className={(locationType === \"user\")? \"active\": \"\"}\n                onClick={handleLocation}\n                icon={<EnvironmentFilled />}\n                text={\"參考您目前所在位置\"}\n              />\n              <OptionCard \n                className={(locationType === \"draw\")? \"active\": \"\"}\n                onClick={handleDraw}\n                icon={<PushpinFilled />}\n                text={\"在地圖上繪製您所在地\"}\n              />\n            </OptionCardRow>\n          </Form.Item>\n          <SubText>您發現物種之地點名稱</SubText>\n          <Form.Item\n            name=\"placeName\"\n            rules={[\n              {\n                required: true,\n                message: '請輸入您發現物種之地點名稱!',\n              },\n            ]}\n            \n          >\n            <AutoComplete\n              options={locationOptions}\n              onSearch={onLocationSearch}\n            >\n              <Input />\n            </AutoComplete>\n          </Form.Item>\n        </div>\n\n        <Form.Item\n          label=\"您的名字\"\n          name=\"userName\"\n          style={{display: (modalPage === 4)? \"block\": \"none\"}}\n        >\n          <Input />\n        </Form.Item>\n\n        <Form.Item\n          label=\"有什麼想說的...\"\n          name=\"context\"\n          style={{display: (modalPage === 4)? \"block\": \"none\"}}\n        >\n          <Input.TextArea />\n        </Form.Item>\n\n        <Form.Item\n          label=\"分享對象\"\n          name=\"isAuthPulic\"\n          style={{display: (modalPage === 5)? \"block\": \"none\"}}     \n          rules={[\n            {\n              required: true,\n              message: '請選擇分享對象!',\n            },\n          ]}\n        >\n          <OptionCardRow>\n            <OptionCard \n              className={(recordType === \"public\")? \"active\": \"\"} \n              onClick={()=>setRecordType(\"public\")}\n              icon={<GlobalOutlined />}\n              text={\"公開顯示發現紀錄、地點與貼文給所有人\"}\n            />\n            <OptionCard \n              className={(recordType === \"private\")? \"active\": \"\"} \n              onClick={()=>setRecordType(\"private\")}\n              icon={<ExceptionOutlined />}\n              text={\"僅顯示發現紀錄、地點與貼文給志工團隊\"}\n            />\n          </OptionCardRow>\n        </Form.Item>\n          \n        <ModalFooter>\n          <Pagination simple \n            defaultCurrent={modalPage} \n            total={50} \n            onChange={(page) => {setModelPage(page)}}\n            style={{width: \"100%\", position: \"relative\"}}\n          />\n          <Form.Item\n            style={{display: (modalPage === 5)? \"block\": \"none\", width: \"100%\"}}\n          >\n            <Button type=\"primary\" htmlType=\"submit\" style={{height: \"40px\", marginInlineStart: \"8px\"}}>\n              送出\n            </Button>\n          </Form.Item>\n        </ModalFooter>\n      </Form>\n    </Modal>\n  );\n};\n\nexport { UpdateRecordModal };"],"mappings":";;AAAA,SAASA,KAAK,EAAEC,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAEC,OAAO,EAAEC,YAAY,EAAEC,UAAU,QAAQ,MAAM;AACpF,SAASC,iBAAiB,EAAEC,aAAa,EAAEC,cAAc,EAAEC,iBAAiB,QAAQ,mBAAmB;AACvG,SAASC,KAAK,EAAEC,aAAa,EAAEC,eAAe,EAAEC,WAAW,EAAEC,MAAM,QAAQ,gBAAgB;AAC3F,SAASC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AACvD,OAAOC,UAAU,MAAM,iBAAiB;AACxC,OAAOC,IAAI,MAAM,kBAAkB;AACnC,OAAOC,IAAI,MAAM,6BAA6B;AAC9C,SAASC,mBAAmB,EAAEC,YAAY,QAAQ,mBAAmB;AACrE,SAASC,QAAQ,QAAQ,SAAS;AAClC,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,UAAU,QAAQ,uBAAuB;AAClD,SAASC,QAAQ,QAAQ,oBAAoB;AAE7C,MAAMC,cAAc,GAAG;EACrBC,UAAU,EAAE,KAAK;EACjBC,QAAQ,EAAE,UAAU;EACpBC,MAAM,EAAE,OAAO;EACfC,KAAK,EAAE;AACT,CAAC;AACD,MAAMC,iBAAiB,GACrBd,IAAI,CAAC,SAAS,CAAC,CAACe,GAAG,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAG;EACjC,OAAO;IACL,KAAK,EAAEA,KAAK;IACZ,OAAO,EAAED,IAAI,CAACE,IAAI;IAClB,OAAO,EAAEF,IAAI,CAACE;EAChB,CAAC;AACH,CAAC,CAAC;AACJ,MAAMC,cAAc,IAAAC,qBAAA,GAClBnB,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,cAAAmB,qBAAA,uBAAjCA,qBAAA,CAAmCL,GAAG,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAG;EACpD,IAAII,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACP,IAAI,CAACQ,EAAE,GAAC,GAAG,CAAC,GAAC,GAAG,GAAG,IAAI,GAAGF,IAAI,CAACC,KAAK,CAACP,IAAI,CAACS,EAAE,GAAC,GAAG,CAAC,GAAC,GAAG;EAClF,OAAO;IACL,KAAK,EAAER,KAAK;IACZ,OAAO,EAAED,IAAI,CAACU,IAAI;IAClB,OAAO,eAAEC,KAAA,CAAAC,aAAA,CAAAD,KAAA,CAAAE,QAAA,QAAGb,IAAI,CAACU,IAAI,eAACC,KAAA,CAAAC,aAAA;MAAME,KAAK,EAAErB,cAAe;MAAAsB,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAEf,WAAkB,CAAG;EAC3E,CAAC;AACH,CAAC,CAAC;AACJ,MAAMgB,WAAW,GAAGhC,MAAM,CAACiC,GAAG;AAC9B;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMC,OAAO,GAAGlC,MAAM,CAACiC,GAAG;AAC1B;AACA;AACA;AACA;AACA,CAAC;AAED,MAAME,aAAa,GAAGnC,MAAM,CAACiC,GAAG;AAChC;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMG,iBAAiB,GAAGA,CAAC;EAAEC,uBAAuB;EAAEC,0BAA0B;EAAEC;AAAW,CAAC,KAAK;EACjG,MAAM;IAAE7B,GAAG;IAAE8B,SAAS;IAAEC,OAAO;IAAEC,SAAS;IAAEC,SAAS;IAAEC;EAAa,CAAC,GAAGpD,UAAU,CAACE,UAAU,CAAC;EAC9F,MAAM,CAAEmD,aAAa,EAAEC,gBAAgB,CAAE,GAAGvD,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAAEwD,SAAS,EAAEC,YAAY,CAAE,GAAGzD,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAAE0D,YAAY,EAAEC,eAAe,CAAE,GAAG3D,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAAE4D,YAAY,EAAEC,eAAe,CAAE,GAAG7D,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAAE8D,UAAU,EAAEC,aAAa,CAAE,GAAG/D,QAAQ,CAAC,QAAQ,CAAC;EACxD,MAAM,CAAEgE,cAAc,EAAEC,iBAAiB,CAAE,GAAGjE,QAAQ,CAACkB,iBAAiB,CAAC;EACzE,MAAM,CAAEgD,eAAe,EAAEC,kBAAkB,CAAE,GAAGnE,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAAEoE,IAAI,CAAE,GAAGlF,IAAI,CAACmF,OAAO,CAAC,CAAC;EAC/B,MAAM;IAAEC;EAAK,CAAC,GAAG1D,QAAQ,CAAC,CAAC;EAE3BV,SAAS,CAAC,MAAM;IACd,IAAIkD,SAAS,EAAE;MACb,IAAI3B,WAAW,GAAGjB,QAAQ,CAAC4C,SAAS,CAAC;MACrC,MAAMmB,SAAS,GAAG,MAAAA,CAAA,KAAY;QAC5B,MAAMC,MAAM,GAAG,MAAMlE,mBAAmB,CAACmB,WAAW,CAAC,CAAC,CAAC,EAAEA,WAAW,CAAC,CAAC,CAAC,CAAC;QACxE8B,gBAAgB,CAACiB,MAAM,CAAC;MAC1B,CAAC;MACDD,SAAS,CAAC,CAAC;MACXH,IAAI,CAACK,aAAa,CAAC,YAAY,EAAEhD,WAAW,CAAC;IAC/C;EACH,CAAC,EAAE,CAAC2B,SAAS,CAAC,CAAC;EAGdlD,SAAS,CAAC,MAAM;IACd,IAAIoD,aAAa,EAAE;MACjB,IAAI7B,WAAW,GAAGjB,QAAQ,CAAC4C,SAAS,CAAC;MACrC3B,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACF,WAAW,CAAC,CAAC,CAAC,GAAC,GAAG,CAAC,GAAC,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACF,WAAW,CAAC,CAAC,CAAC,GAAC,GAAG,CAAC,GAAC,GAAG;MAC5F,MAAMiD,OAAO,GAAGpB,aAAa,CAACnC,GAAG,CAAC,CAACwD,KAAK,EAAEtD,KAAK,KAAG;QAChD,OAAO;UACL,KAAK,EAAEA,KAAK;UACZ,OAAO,EAAEsD,KAAK;UACd,OAAO,eAAE5C,KAAA,CAAAC,aAAA,CAAAD,KAAA,CAAAE,QAAA,QAAG0C,KAAK,eAAC5C,KAAA,CAAAC,aAAA;YAAME,KAAK,EAAErB,cAAe;YAAAsB,MAAA;YAAAC,QAAA;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA;UAAA,GAAEf,WAAkB,CAAG;QACvE,CAAC;MACH,CAAC,CAAC;MACF,IAAIiD,OAAO,CAACE,MAAM,GAAG,CAAC,EAAE;QACtBT,kBAAkB,CAAC,CAACO,OAAO,CAAC,CAAC,CAAC,EAAEA,OAAO,CAAC,CAAC,CAAC,EAAEA,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1D;IACF;EACF,CAAC,EAAE,CAACpB,aAAa,CAAC,CAAC;EAEnBpD,SAAS,CAAC,MAAM;IACd,IAAI4D,UAAU,KAAK,QAAQ,EAAE;MAC3BM,IAAI,CAACK,aAAa,CAAC,aAAa,EAAE,IAAI,CAAC;IACzC,CAAC,MAAM;MACLL,IAAI,CAACK,aAAa,CAAC,aAAa,EAAE,KAAK,CAAC;IAC1C;EACF,CAAC,EAAE,CAACX,UAAU,CAAC,CAAC;;EAEhB;EACA,MAAMe,YAAY,GAAGA,CAAA,KAAM;IACzB9B,0BAA0B,CAAC,KAAK,CAAC;EACnC,CAAC;;EAED;EACA,MAAM+B,eAAe,GAAIC,GAAG,IAAK;IAC/B,IAAIC,QAAQ,GAAG,EAAE;IACjB,IAAID,GAAG,EAAE;MACPC,QAAQ,GAAG9D,iBAAiB,CAAC+D,MAAM,CACjC,CAAC;QAACC;MAAK,CAAC,KAAKA,KAAK,CAACC,QAAQ,CAACJ,GAAG,CACjC,CAAC;IACH;IACAd,iBAAiB,CAACe,QAAQ,CAAC;EAC7B,CAAC;EAED,MAAMI,eAAe,GAAIL,GAAG,IAAK;IAC/BX,IAAI,CAACK,aAAa,CAAC,aAAa,EAAEM,GAAG,CAAC;EACxC,CAAC;;EAED;EACA,MAAMM,gBAAgB,GAAIN,GAAG,IAAK;IAChC,IAAIC,QAAQ,GAAG,EAAE;IACjB,IAAID,GAAG,EAAE;MACPC,QAAQ,GAAGzD,cAAc,CAAC0D,MAAM,CAC9B,CAAC;QAACC;MAAK,CAAC,KAAKA,KAAK,CAACC,QAAQ,CAACJ,GAAG,CACjC,CAAC;IACH;IAAC;IACDZ,kBAAkB,CAACa,QAAQ,CAAC;EAC9B,CAAC;EAED,MAAMM,cAAc,GAAGA,CAAA,KAAM;IAC3BzB,eAAe,CAAC,MAAM,CAAC;IACvB1C,GAAG,CAACoE,SAAS,CAAC,CAAC,CAACC,OAAO,CAAEC,KAAK,IAAK;MACjC,IAAIA,KAAK,CAACC,GAAG,CAAC,MAAM,CAAC,KAAK,cAAc,EAAE;QACxC,IAAI;UAAA,IAAAC,qBAAA;UACF,IAAIC,KAAK,IAAAD,qBAAA,GAAGF,KAAK,CAACI,SAAS,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,cAAAJ,qBAAA,uBAAhDA,qBAAA,CAAkDK,cAAc,CAAC,CAAC;UAC9E/C,SAAS,CAAC2C,KAAK,CAAC;UAChBvC,YAAY,CAACuC,KAAK,CAAC;UACnB1C,OAAO,CAAC,EAAE,CAAC;UACX9D,OAAO,CAAC6G,OAAO,CAAC,aAAa,CAAC;QAChC,CAAC,CAAC,OAAMC,CAAC,EAAE,CAEX;MACF;IACF,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,UAAU,GAAGA,CAAA,KAAM;IACvBtC,eAAe,CAAC,MAAM,CAAC;IACvBgB,YAAY,CAAC,CAAC;IACd1B,SAAS,CAAC,IAAI,CAAC;EACjB,CAAC;EAED,MAAMiD,cAAc,GAAI/E,KAAK,IAAK;IAChC,IAAIqC,YAAY,CAACyB,QAAQ,CAAC9D,KAAK,CAAC,EAAC;MAC/B,IAAIgF,IAAI,GAAG,CAAC,GAAG3C,YAAY,CAAC;MAC5B,IAAI4C,WAAW,GAAGD,IAAI,CAACE,OAAO,CAAClF,KAAK,CAAC;MACrC,IAAIiF,WAAW,GAAG,CAAC,CAAC,EAAED,IAAI,CAACG,MAAM,CAACF,WAAW,EAAE,CAAC,CAAC;MACjD3C,eAAe,CAAC0C,IAAI,CAAC;IACvB,CAAC,MAAM;MACL1C,eAAe,CAAC,CAAC,GAAGD,YAAY,EAAErC,KAAK,CAAC,CAAC;IAC3C;EACF,CAAC;EAEDnB,SAAS,CAAC,MAAM;IACdkE,IAAI,CAACK,aAAa,CAAC,SAAS,EAAEf,YAAY,CAAC;EAC7C,CAAC,EAAE,CAACA,YAAY,CAAC,CAAC;;EAElB;EACA,MAAM+C,QAAQ,GAAG,MAAOC,MAAM,IAAK;IACjCtH,OAAO,CAAC6G,OAAO,CAAC,aAAa,CAAC;IAC9B,MAAMU,IAAI,GAAG,MAAMpG,YAAY,CAACmG,MAAM,CAAC;IACvC1D,UAAU,CAAC2D,IAAI,CAAC;IAChB5D,0BAA0B,CAAC,KAAK,CAAC;EACnC,CAAC;EAED,MAAM6D,cAAc,GAAIC,SAAS,IAAK;IACpCzH,OAAO,CAAC0H,KAAK,CAAC,kBAAkB,CAAC;EACnC,CAAC;EAED,oBACE/E,KAAA,CAAAC,aAAA,CAAChD,KAAK;IACJ+H,KAAK,EAAC,0BAAM;IACZC,IAAI,EAAElE,uBAAwB;IAC9BmE,QAAQ,EAAEpC,YAAa;IACvBqC,MAAM,EAAE,IAAK;IACbC,SAAS,EAAE;MAACC,SAAS,EAAE;IAAG,CAAE;IAAAjF,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAE5BT,KAAA,CAAAC,aAAA,CAAC9C,IAAI;IACHkF,IAAI,EAAEA,IAAK;IACX9C,IAAI,EAAC,OAAO;IACZ+F,QAAQ,EAAE;MAACC,IAAI,EAAE;IAAG,CAAE;IACtBC,UAAU,EAAE;MAACD,IAAI,EAAE;IAAG,CAAE;IACxBE,aAAa,EAAE;MACbC,QAAQ,EAAEnD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEhD,IAAI;MACpBoG,WAAW,EAAE,IAAI;MACjBC,UAAU,EAAEvE;IACd,CAAE;IACFqD,QAAQ,EAAEA,QAAS;IACnBG,cAAc,EAAEA,cAAe;IAC/BgB,YAAY,EAAC,KAAK;IAAAzF,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEjBT,KAAA,CAAAC,aAAA;IAAKE,KAAK,EAAE;MAAC2F,OAAO,EAAGrE,SAAS,KAAK,CAAC,GAAG,OAAO,GAAE;IAAM,CAAE;IAAArB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzDT,KAAA,CAAAC,aAAA,CAAC9C,IAAI,CAAC4I,IAAI;IACRC,KAAK,EAAC,cAAI;IACVzG,IAAI,EAAC,SAAS;IAAAa,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEdT,KAAA,CAAAC,aAAA,CAACY,aAAa;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACZT,KAAA,CAAAC,aAAA,CAACrB,UAAU;IACTqH,SAAS,EAAGtE,YAAY,CAACyB,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,GAAE,EAAG;IACpD8C,OAAO,EAAEA,CAAA,KAAM7B,cAAc,CAAC,CAAC,CAAE;IACjC8B,IAAI,eAAEnG,KAAA,CAAAC,aAAA,CAACrC,KAAK;MAAAwC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAE;IAChB2F,IAAI,EAAE,IAAK;IAAAhG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACZ,CAAC,eACFT,KAAA,CAAAC,aAAA,CAACrB,UAAU;IACTqH,SAAS,EAAGtE,YAAY,CAACyB,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,GAAE,EAAG;IACpD8C,OAAO,EAAEA,CAAA,KAAM7B,cAAc,CAAC,CAAC,CAAE;IACjC8B,IAAI,eAAEnG,KAAA,CAAAC,aAAA,CAACnC,eAAe;MAAAsC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAE;IAC1B2F,IAAI,EAAE,KAAM;IAAAhG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACb,CAAC,eACFT,KAAA,CAAAC,aAAA,CAACrB,UAAU;IACTqH,SAAS,EAAGtE,YAAY,CAACyB,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,GAAE,EAAG;IACpD8C,OAAO,EAAEA,CAAA,KAAM7B,cAAc,CAAC,CAAC,CAAE;IACjC8B,IAAI,eAAEnG,KAAA,CAAAC,aAAA,CAACpC,aAAa;MAAAuC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAE;IACxB2F,IAAI,EAAE,IAAK;IAAAhG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACZ,CACY,CAAC,eAChBT,KAAA,CAAAC,aAAA,CAACY,aAAa;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACZT,KAAA,CAAAC,aAAA,CAACrB,UAAU;IACTqH,SAAS,EAAGtE,YAAY,CAACyB,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,GAAE,EAAG;IACpD8C,OAAO,EAAEA,CAAA,KAAM7B,cAAc,CAAC,CAAC,CAAE;IACjC8B,IAAI,eAAEnG,KAAA,CAAAC,aAAA,CAAClC,WAAW;MAAAqC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAE;IACtB2F,IAAI,EAAE,IAAK;IAAAhG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACZ,CAAC,eACFT,KAAA,CAAAC,aAAA,CAACrB,UAAU;IACTqH,SAAS,EAAGtE,YAAY,CAACyB,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,GAAE,EAAG;IACpD8C,OAAO,EAAEA,CAAA,KAAM7B,cAAc,CAAC,CAAC,CAAE;IACjC8B,IAAI,eAAEnG,KAAA,CAAAC,aAAA,CAACjC,MAAM;MAAAoC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAE;IACjB2F,IAAI,EAAE,IAAK;IAAAhG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACZ,CACY,CACN,CACR,CAAC,eAENT,KAAA,CAAAC,aAAA;IAAKE,KAAK,EAAE;MAAC2F,OAAO,EAAGrE,SAAS,KAAK,CAAC,GAAG,OAAO,GAAE;IAAM,CAAE;IAAArB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACxDT,KAAA,CAAAC,aAAA,CAAC9C,IAAI,CAAC4I,IAAI;IACRC,KAAK,EAAC,cAAI;IACVzG,IAAI,EAAC,aAAa;IAClB8G,KAAK,EAAE,CACL;MACEC,QAAQ,EAAE,IAAI;MACdjJ,OAAO,EAAE;IACX,CAAC,CACD;IAAA+C,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEFT,KAAA,CAAAC,aAAA,CAAC3C,YAAY;IACXqF,OAAO,EAAEV,cAAe;IACxBsE,QAAQ,EAAExD,eAAgB;IAC1ByD,QAAQ,EAAEnD,eAAgB;IAAAjD,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAE1BT,KAAA,CAAAC,aAAA,CAAC7C,KAAK;IAAAgD,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACI,CAAC,eACfT,KAAA,CAAAC,aAAA,CAACW,OAAO;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,8DAAmB,CACnB,CAOR,CAAC,eAENT,KAAA,CAAAC,aAAA;IAAKE,KAAK,EAAE;MAAC2F,OAAO,EAAGrE,SAAS,KAAK,CAAC,GAAG,OAAO,GAAE;IAAM,CAAE;IAAArB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACxDT,KAAA,CAAAC,aAAA,CAAC9C,IAAI,CAAC4I,IAAI;IACRC,KAAK,EAAE,MAAO;IACdzG,IAAI,EAAC,YAAY;IACjB8G,KAAK,EAAE,CACL;MACEC,QAAQ,EAAE,IAAI;MACdjJ,OAAO,EAAE;IACX,CAAC,CACD;IAAA+C,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEFT,KAAA,CAAAC,aAAA,CAACW,OAAO;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,8DAAmB,CAAC,eAC7BT,KAAA,CAAAC,aAAA,CAACY,aAAa;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACZT,KAAA,CAAAC,aAAA,CAACrB,UAAU;IACTqH,SAAS,EAAGpE,YAAY,KAAK,MAAM,GAAG,QAAQ,GAAE,EAAG;IACnDqE,OAAO,EAAE3C,cAAe;IACxB4C,IAAI,eAAEnG,KAAA,CAAAC,aAAA,CAACzC,iBAAiB;MAAA4C,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAE;IAC5B2F,IAAI,EAAE,WAAY;IAAAhG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACnB,CAAC,eACFT,KAAA,CAAAC,aAAA,CAACrB,UAAU;IACTqH,SAAS,EAAGpE,YAAY,KAAK,MAAM,GAAG,QAAQ,GAAE,EAAG;IACnDqE,OAAO,EAAE9B,UAAW;IACpB+B,IAAI,eAAEnG,KAAA,CAAAC,aAAA,CAACxC,aAAa;MAAA2C,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAE;IACxB2F,IAAI,EAAE,YAAa;IAAAhG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACpB,CACY,CACN,CAAC,eACZT,KAAA,CAAAC,aAAA,CAACW,OAAO;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,8DAAmB,CAAC,eAC7BT,KAAA,CAAAC,aAAA,CAAC9C,IAAI,CAAC4I,IAAI;IACRxG,IAAI,EAAC,WAAW;IAChB8G,KAAK,EAAE,CACL;MACEC,QAAQ,EAAE,IAAI;MACdjJ,OAAO,EAAE;IACX,CAAC,CACD;IAAA+C,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAGFT,KAAA,CAAAC,aAAA,CAAC3C,YAAY;IACXqF,OAAO,EAAER,eAAgB;IACzBoE,QAAQ,EAAEjD,gBAAiB;IAAAlD,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAE3BT,KAAA,CAAAC,aAAA,CAAC7C,KAAK;IAAAgD,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACI,CACL,CACR,CAAC,eAENT,KAAA,CAAAC,aAAA,CAAC9C,IAAI,CAAC4I,IAAI;IACRC,KAAK,EAAC,0BAAM;IACZzG,IAAI,EAAC,UAAU;IACfY,KAAK,EAAE;MAAC2F,OAAO,EAAGrE,SAAS,KAAK,CAAC,GAAG,OAAO,GAAE;IAAM,CAAE;IAAArB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAErDT,KAAA,CAAAC,aAAA,CAAC7C,KAAK;IAAAgD,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACC,CAAC,eAEZT,KAAA,CAAAC,aAAA,CAAC9C,IAAI,CAAC4I,IAAI;IACRC,KAAK,EAAC,yCAAW;IACjBzG,IAAI,EAAC,SAAS;IACdY,KAAK,EAAE;MAAC2F,OAAO,EAAGrE,SAAS,KAAK,CAAC,GAAG,OAAO,GAAE;IAAM,CAAE;IAAArB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAErDT,KAAA,CAAAC,aAAA,CAAC7C,KAAK,CAACqJ,QAAQ;IAAArG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACR,CAAC,eAEZT,KAAA,CAAAC,aAAA,CAAC9C,IAAI,CAAC4I,IAAI;IACRC,KAAK,EAAC,0BAAM;IACZzG,IAAI,EAAC,aAAa;IAClBY,KAAK,EAAE;MAAC2F,OAAO,EAAGrE,SAAS,KAAK,CAAC,GAAG,OAAO,GAAE;IAAM,CAAE;IACrD4E,KAAK,EAAE,CACL;MACEC,QAAQ,EAAE,IAAI;MACdjJ,OAAO,EAAE;IACX,CAAC,CACD;IAAA+C,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEFT,KAAA,CAAAC,aAAA,CAACY,aAAa;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACZT,KAAA,CAAAC,aAAA,CAACrB,UAAU;IACTqH,SAAS,EAAGlE,UAAU,KAAK,QAAQ,GAAG,QAAQ,GAAE,EAAG;IACnDmE,OAAO,EAAEA,CAAA,KAAIlE,aAAa,CAAC,QAAQ,CAAE;IACrCmE,IAAI,eAAEnG,KAAA,CAAAC,aAAA,CAACvC,cAAc;MAAA0C,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAE;IACzB2F,IAAI,EAAE,oBAAqB;IAAAhG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC5B,CAAC,eACFT,KAAA,CAAAC,aAAA,CAACrB,UAAU;IACTqH,SAAS,EAAGlE,UAAU,KAAK,SAAS,GAAG,QAAQ,GAAE,EAAG;IACpDmE,OAAO,EAAEA,CAAA,KAAIlE,aAAa,CAAC,SAAS,CAAE;IACtCmE,IAAI,eAAEnG,KAAA,CAAAC,aAAA,CAACtC,iBAAiB;MAAAyC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAE;IAC5B2F,IAAI,EAAE,oBAAqB;IAAAhG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC5B,CACY,CACN,CAAC,eAEZT,KAAA,CAAAC,aAAA,CAACS,WAAW;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACVT,KAAA,CAAAC,aAAA,CAAC1C,UAAU;IAACmJ,MAAM;IAChBC,cAAc,EAAElF,SAAU;IAC1BmF,KAAK,EAAE,EAAG;IACVC,QAAQ,EAAGC,IAAI,IAAK;MAACpF,YAAY,CAACoF,IAAI,CAAC;IAAA,CAAE;IACzC3G,KAAK,EAAE;MAAC4G,KAAK,EAAE,MAAM;MAAEC,QAAQ,EAAE;IAAU,CAAE;IAAA5G,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC9C,CAAC,eACFT,KAAA,CAAAC,aAAA,CAAC9C,IAAI,CAAC4I,IAAI;IACR5F,KAAK,EAAE;MAAC2F,OAAO,EAAGrE,SAAS,KAAK,CAAC,GAAG,OAAO,GAAE,MAAM;MAAEsF,KAAK,EAAE;IAAM,CAAE;IAAA3G,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEpET,KAAA,CAAAC,aAAA,CAAC/C,MAAM;IAAC+J,IAAI,EAAC,SAAS;IAACC,QAAQ,EAAC,QAAQ;IAAC/G,KAAK,EAAE;MAACgH,MAAM,EAAE,MAAM;MAAEC,iBAAiB,EAAE;IAAK,CAAE;IAAAhH,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,cAEpF,CACC,CACA,CACT,CACD,CAAC;AAEZ,CAAC;AAED,SAASK,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module"}