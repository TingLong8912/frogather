{"ast":null,"code":"var _jsxFileName = \"/Users/yantinglong/Documents/project/frogather/src/containers/Sences/Record/Lists.jsx\";\nimport { List, message } from 'antd';\nimport styled from 'styled-components';\nimport { ListItems } from 'components/ListItems';\nimport React, { useEffect, useState, useContext } from 'react';\nimport { getRecords } from './../../../axios';\nimport { Select, Button, Tooltip } from 'antd';\nimport { UpdateRecordModal } from 'containers/Sences/Record/Modal';\nimport { IoAddOutline } from 'react-icons/io5';\nimport { HiSortDescending } from 'react-icons/hi';\nimport { tagRender } from 'components/Tags';\nimport { ActionButton } from 'components/ActionButton';\nimport MapContext from \"hook/MapContext\";\nimport { useAuth0 } from '@auth0/auth0-react';\nconst CustomizedLists = styled(List)`\n  border: none;\n  height: 95vh;\n  overflow-y: scroll;\n  padding-top: 35px;\n`;\nconst options = [{\n  key: '1',\n  label: '全部',\n  value: \"all\"\n}, {\n  key: '2',\n  label: '蛙調',\n  value: \"frogSurvey\"\n}, {\n  key: '3',\n  label: '待移除',\n  value: \"remove\"\n}, {\n  key: '4',\n  label: '已移除',\n  value: \"removed\"\n}, {\n  key: '5',\n  label: '詢問',\n  value: \"question\"\n}];\nconst Lists = () => {\n  const [isAsc, setIsAsc] = useState(-1);\n  const [records, setRecords] = useState([]);\n  const [isUpdateRecordModalOpen, setIsUpdateRecordModalOpen] = useState(false);\n  const {\n    setRecordCoords\n  } = useContext(MapContext);\n  const {\n    isAuthenticated\n  } = useAuth0();\n\n  /* MODAL HANDLER */\n  const showModal = () => {\n    if (isAuthenticated) {\n      setIsUpdateRecordModalOpen(true);\n    } else {\n      message.error(\"🐸💧：請先登入\");\n    }\n  };\n\n  /* GET RECORD WHEN REFRESHING */\n  const getData = async () => {\n    const data = await getRecords(isAsc);\n    setIsAsc(isAsc === 1 ? -1 : 1);\n    setRecords(data);\n  };\n  useEffect(() => {\n    getData();\n  }, []);\n\n  /* UPDATE RECORD COORDS */\n  useEffect(() => {\n    const coords = records.map(({\n      _id,\n      species,\n      hashtag,\n      coords\n    }) => {\n      return {\n        id: _id,\n        species: species,\n        hashtag: hashtag,\n        coordinates: coords.coordinates\n      };\n    });\n    setRecordCoords(coords);\n  }, [records]);\n  const handleSort = async () => {\n    const data = await getRecords(isAsc);\n    setIsAsc(isAsc === 1 ? -1 : 1);\n    setRecords(data);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CustomizedLists, {\n    id: \"list\",\n    header: /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ActionButton, {\n      icon: /*#__PURE__*/React.createElement(Tooltip, {\n        title: \"\\u4F9D\\u7167\\u6642\\u9593\\u6392\\u5E8F\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(HiSortDescending, {\n        onClick: handleSort,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 19\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"\\u56DE\\u5831\\u7D00\\u9304\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      onClick: showModal,\n      style: {\n        width: \"64px\",\n        height: \"30px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IoAddOutline, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(UpdateRecordModal, {\n      isUpdateRecordModalOpen: isUpdateRecordModalOpen,\n      setIsUpdateRecordModalOpen: setIsUpdateRecordModalOpen,\n      setRecords: setRecords,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }\n    })),\n    bordered: true,\n    dataSource: records,\n    renderItem: item => /*#__PURE__*/React.createElement(List.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ListItems, {\n      item: item,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }));\n};\nexport { Lists };","map":{"version":3,"names":["List","message","styled","ListItems","React","useEffect","useState","useContext","getRecords","Select","Button","Tooltip","UpdateRecordModal","IoAddOutline","HiSortDescending","tagRender","ActionButton","MapContext","useAuth0","CustomizedLists","options","key","label","value","Lists","isAsc","setIsAsc","records","setRecords","isUpdateRecordModalOpen","setIsUpdateRecordModalOpen","setRecordCoords","isAuthenticated","showModal","error","getData","data","coords","map","_id","species","hashtag","id","coordinates","handleSort","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","header","style","display","justifyContent","icon","title","onClick","type","width","height","bordered","dataSource","renderItem","item","Item"],"sources":["/Users/yantinglong/Documents/project/frogather/src/containers/Sences/Record/Lists.jsx"],"sourcesContent":["import { List, message } from 'antd';\nimport styled from 'styled-components';\nimport { ListItems } from 'components/ListItems';\nimport React, { useEffect, useState, useContext } from 'react';\nimport { getRecords } from './../../../axios';\nimport { Select, Button, Tooltip } from 'antd';\nimport { UpdateRecordModal } from 'containers/Sences/Record/Modal';\nimport { IoAddOutline } from 'react-icons/io5';\nimport { HiSortDescending } from 'react-icons/hi';\nimport { tagRender } from 'components/Tags';\nimport { ActionButton } from 'components/ActionButton';\nimport MapContext from \"hook/MapContext\";\nimport { useAuth0 } from '@auth0/auth0-react';\n\nconst CustomizedLists = styled(List)`\n  border: none;\n  height: 95vh;\n  overflow-y: scroll;\n  padding-top: 35px;\n`;\n\nconst options = [\n  {\n    key: '1',\n    label: '全部',\n    value: \"all\",\n  },\n  {\n    key: '2',\n    label: '蛙調',\n    value: \"frogSurvey\",\n  },\n  {\n    key: '3',\n    label: '待移除',\n    value: \"remove\",\n  },\n  {\n    key: '4',\n    label: '已移除',\n    value: \"removed\",\n  },\n  {\n    key: '5',\n    label: '詢問',\n    value: \"question\",\n  }\n]\n\nconst Lists = () => {\n  const [ isAsc, setIsAsc ] = useState(-1);\n  const [ records, setRecords ] = useState([]);\n  const [ isUpdateRecordModalOpen, setIsUpdateRecordModalOpen ] = useState(false);\n  const { setRecordCoords } = useContext(MapContext);\n  const { isAuthenticated } = useAuth0();\n\n  /* MODAL HANDLER */\n  const showModal = () => {\n    if (isAuthenticated) {\n      setIsUpdateRecordModalOpen(true);\n    } else {\n      message.error(\"🐸💧：請先登入\");\n    }\n  };\n\n  /* GET RECORD WHEN REFRESHING */\n  const getData = async () => {\n    const data = await getRecords(isAsc);\n    setIsAsc((isAsc === 1) ? -1: 1);\n    setRecords(data);\n  };\n  \n  useEffect(() => {\n    getData();\n  }, []);\n\n  /* UPDATE RECORD COORDS */\n  useEffect(() => {\n    const coords = records.map(({ _id, species, hashtag, coords }) => {\n      return {\n        id: _id,\n        species: species,\n        hashtag: hashtag,\n        coordinates: coords.coordinates\n      };\n    });\n    setRecordCoords(coords);\n  }, [records]);\n\n  const handleSort = async () => {\n    const data = await getRecords(isAsc);\n    setIsAsc((isAsc === 1) ? -1: 1);\n    setRecords(data);\n  };\n\n  return (\n    <div>\n      <CustomizedLists\n        id=\"list\"\n        header={\n          <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n            {/* <Tooltip title=\"點擊以選擇顯示分類\" >\n              <Select\n                mode=\"multiple\"\n                showArrow={false}\n                tagRender={tagRender}\n                defaultValue={['all']}\n                style={{\n                  width: 'calc( 100% - 100px )',\n                }}\n                options={options}\n              />\n            </Tooltip> */}\n            <ActionButton \n              icon={\n                <Tooltip title=\"依照時間排序\" >\n                  <HiSortDescending \n                    onClick={handleSort}\n                  />\n                </Tooltip>\n              } \n            />\n            <Tooltip title=\"回報紀錄\" >\n              <Button type=\"primary\" onClick={showModal} style={{width: \"64px\", height: \"30px\"}}>\n                <IoAddOutline />\n              </Button>\n            </Tooltip>\n            <UpdateRecordModal \n              isUpdateRecordModalOpen={isUpdateRecordModalOpen} \n              setIsUpdateRecordModalOpen={setIsUpdateRecordModalOpen} \n              setRecords={setRecords}\n            />\n          </div>\n        }\n        bordered\n        dataSource={records}\n        renderItem={(item) => (\n          <List.Item>\n            <ListItems item={item} />\n          </List.Item>\n        )}\n      />\n    </div>\n  );\n};\n\nexport { Lists }"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}